import{_ as $,a as U,r as S,o as P,c as u,d as p,l as k,f as e,i as x,e as y,g as o,v as l,A as V,B as d,u as w,M as b}from"./index-BDcH1WRC.js";const C={class:"text-gray-800 dark:text-gray-200","data-form-type":"other"},A={class:"container mx-auto px-4 pb-16"},I={class:"grid grid-cols-1 md:grid-cols-2 gap-8"},j={class:"order-1 md:order-2 w-full p-0 mx-auto"},D={class:"panel-content p-6 md:p-8 bg-white dark:bg-gray-800 rounded-xl shadow-md"},E={class:"account-form space-y-6"},R={class:"setting-group"},F={class:"setting-group"},W={class:"setting-group"},G={class:"setting-group"},N={class:"setting-group"},K={class:"mt-1 text-gray-500 dark:text-gray-400 text-xs"},z={key:0},L={key:1},M={key:0,class:"space-y-4 pt-2 border-t border-gray-200 dark:border-gray-700"},O={class:"setting-group"},H={class:"setting-group"},Y={key:1,class:"space-y-4 pt-2 border-t border-gray-200 dark:border-gray-700"},q={class:"setting-group"},J={class:"setting-group"},Q={class:"setting-group"},X={class:"setting-group"},Z={class:"setting-group"},h={key:2,class:"space-y-4 pt-2 border-t border-gray-200 dark:border-gray-700"},tt={class:"setting-group"},et={class:"setting-group"},rt={class:"setting-group"},st={key:3,class:"space-y-4 pt-2 border-t border-gray-200 dark:border-gray-700"},ot={class:"setting-group"},at={class:"setting-group"},lt={class:"setting-group"},nt={class:"setting-group"},it={class:"order-2 md:order-1 w-full p-0 mx-auto"},dt={class:"panel-content p-6 md:p-8 bg-white dark:bg-gray-800 rounded-xl shadow-md"},gt={class:"account-form space-y-6"},ut={class:"setting-group flex items-center justify-between py-2"},pt={class:"relative inline-flex items-center cursor-pointer"},bt={class:"setting-group flex items-center justify-between py-2"},yt={class:"relative inline-flex items-center cursor-pointer"},mt={class:"setting-group flex items-center justify-between py-2"},ft={class:"relative inline-flex items-center cursor-pointer"},kt={class:"setting-group flex items-center justify-between py-2"},xt={class:"relative inline-flex items-center cursor-pointer"},wt={class:"setting-group flex items-center justify-between py-2"},vt={class:"relative inline-flex items-center cursor-pointer"},ct={class:"setting-group flex items-center justify-between py-2"},_t={class:"relative inline-flex items-center cursor-pointer"},Tt={class:"setting-group flex items-center justify-between py-2"},Ut={class:"relative inline-flex items-center cursor-pointer"},Vt={class:"pl-0 mt-4 space-y-4 border-t border-gray-100 dark:border-gray-700 pt-4"},Bt={class:"setting-group"},$t={class:"setting-group"},St={class:"setting-group flex items-center justify-between py-2"},Pt={class:"relative inline-flex items-center cursor-pointer"},Ct={class:"pl-0 mt-4 space-y-4 border-t border-gray-100 dark:border-gray-700 pt-4"},At={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},It={class:"setting-group"},jt={class:"setting-group"},Dt={class:"setting-group"},Et={class:"setting-group"},Rt={class:"setting-group col-span-1 md:col-span-2"},Ft={class:"setting-group flex items-center justify-between py-2"},Wt={class:"relative inline-flex items-center cursor-pointer"},Gt={class:"pl-0 mt-4 space-y-2 border-t border-gray-100 dark:border-gray-700 pt-4"},Nt={__name:"Settings",setup(Kt){const r=U({id:1,original_image:!1,save_webp:!1,thumbnail:!1,tourist:!1,tg_notice:!1,tg_webhook:!1,turnstile:!1,turnstile_site_key:"",turnstile_secret_key:"",site_domain:"",tg_bot_token:"",tg_receivers:"",tg_notice_text:"",storage_type:"",s3_endpoint:"",s3_access_key:"",s3_secret_key:"",s3_bucket:"",s3_custom_url:"",webdav_url:"",webdav_user:"",webdav_pass:"",ftp_host:"",ftp_port:21,ftp_user:"",ftp_pass:"",custom_api_url:"",custom_api_key:"",watermark_enable:"",watermark_text:"",watermark_pos:"",watermark_size:"",watermark_color:"",watermark_opac:"",referer_white_list:"",referer_white_enable:!1}),g=U({}),f=S(!1);let v=null;const c=()=>({"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("authToken")}`}),m=async(n,t)=>{n in g&&g[n]==t||(clearTimeout(v),v=setTimeout(async()=>{try{if(f.value)return;f.value=!0;const s=await fetch("/api/settings/update",{method:"POST",headers:c(),body:JSON.stringify({key:n,value:t})}),T=await s.json();s.ok&&T.code===200?(b.success("更新成功"),g[n]=t):(g[n]&&(r[n]=g[n]),b.error(`更新失败：${T.message||"未知错误"}`))}catch(s){console.error("保存失败:",s),b.error("更新失败：网络异常")}finally{f.value=!1}},300))},i=(n,t)=>{m(n,t)},a=(n,t)=>{if((n=="tg_bot_token"||n=="tg_receivers")&&(r.tg_bot_token==""||r.tg_receivers=="")&&r.storage_type==="telegram"){b.warning("配置不完整，切回默认存储方式"),setTimeout(()=>{r.storage_type="default",m("storage_type","default")},1500);return}m(n,t)},_=(n,t)=>{if(n=="storage_type"&&t==="telegram"&&(!r.tg_bot_token||!r.tg_receivers)){b.warning("请先填写机器人令牌和接收者列表"),g?.storage_type?r.storage_type=g.storage_type:r.storage_type="default";return}m(n,t)},B=async()=>{try{const n=await fetch("/api/settings/get",{method:"GET",headers:c()});if(!n.ok)throw new Error(`请求失败：${n.status}`);const t=await n.json();t.code===200&&t.data?(Object.assign(r,t.data),Object.assign(g,t.data)):b.error(t.message||"获取设置失败：无数据")}catch(n){console.error("获取设置失败:",n),b.error(n.message||"获取设置失败：网络异常")}};return P(()=>{B()}),(n,t)=>(p(),u("div",C,[t[151]||(t[151]=k('<form style="display:none;" aria-hidden="true" data-v-b8c37557><input type="text" name="fake-username-field" data-v-b8c37557><input type="password" name="fake-password-field" data-v-b8c37557></form><div class="settings-header container mx-auto px-4 py-4" data-v-b8c37557><h1 class="page-title flex items-center text-2xl md:text-3xl font-bold" data-v-b8c37557> 设置 </h1><p class="page-description text-gray-600 dark:text-gray-400 mt-2" data-v-b8c37557> 管理您的系统设置 </p></div>',2)),e("div",A,[e("div",I,[e("div",j,[e("div",D,[t[103]||(t[103]=e("h2",{class:"panel-title flex items-center text-xl font-semibold mb-8"},[e("span",{class:"panel-icon mr-2 text-2xl"},[e("i",{class:"ri-list-settings-line"})]),x(" 系统配置 ")],-1)),e("div",E,[e("div",R,[t[72]||(t[72]=e("label",{class:"setting-label block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",for:"site_domain"}," 网站域名 ",-1)),o(e("input",{id:"site_domain","onUpdate:modelValue":t[0]||(t[0]=s=>r.site_domain=s),type:"text",class:"setting-input w-full px-4 py-2.5 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 focus:ring-2 focus:ring-primary focus:border-primary dark:focus:ring-primary/70 dark:focus:border-primary/70 transition-colors outline-none",placeholder:"如：example.com 或 https://example.com",onBlur:t[1]||(t[1]=s=>a("site_domain",r.site_domain))},null,544),[[l,r.site_domain]]),t[73]||(t[73]=e("div",{class:"mt-1 text-gray-500 dark:text-gray-400 text-xs"}," 用于 Telegram Webhook 等功能，无需填写末尾斜杠 ",-1))]),e("div",F,[t[74]||(t[74]=e("label",{class:"setting-label block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",for:"tg_bot_token"}," TG Bot Token ",-1)),o(e("input",{id:"tg_bot_token","onUpdate:modelValue":t[2]||(t[2]=s=>r.tg_bot_token=s),type:"text",autocomplete:"off",class:"setting-input w-full px-4 py-2.5 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 focus:ring-2 focus:ring-primary focus:border-primary dark:focus:ring-primary/70 dark:focus:border-primary/70 transition-colors outline-none",placeholder:"请输入TG Bot Token",onBlur:t[3]||(t[3]=s=>a("tg_bot_token",r.tg_bot_token))},null,544),[[l,r.tg_bot_token]]),t[75]||(t[75]=e("div",{class:"mt-1 text-gray-500 dark:text-gray-400 text-xs"}," 存储选择Telegram时必填 ",-1))]),e("div",W,[t[76]||(t[76]=e("label",{class:"setting-label block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",for:"tg_receivers"}," TG 通知接收者 ",-1)),o(e("input",{id:"tg_receivers","onUpdate:modelValue":t[4]||(t[4]=s=>r.tg_receivers=s),type:"text",autocomplete:"off",class:"setting-input w-full px-4 py-2.5 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 focus:ring-2 focus:ring-primary focus:border-primary dark:focus:ring-primary/70 dark:focus:border-primary/70 transition-colors outline-none",placeholder:"接收通知的TG用户ID",onBlur:t[5]||(t[5]=s=>a("tg_receivers",r.tg_receivers))},null,544),[[l,r.tg_receivers]]),t[77]||(t[77]=e("div",{class:"mt-1 text-gray-500 dark:text-gray-400 text-xs"}," 存储选择Telegram时必填 ",-1))]),e("div",G,[t[78]||(t[78]=e("label",{class:"setting-label block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",for:"tg_notice_text"}," TG 通知文本 ",-1)),o(e("input",{id:"tg_notice_text","onUpdate:modelValue":t[6]||(t[6]=s=>r.tg_notice_text=s),type:"text",autocomplete:"off",class:"setting-input w-full px-4 py-2.5 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 focus:ring-2 focus:ring-primary focus:border-primary dark:focus:ring-primary/70 dark:focus:border-primary/70 transition-colors outline-none",placeholder:"自定义TG通知文本",onBlur:t[7]||(t[7]=s=>a("tg_notice_text",r.tg_notice_text))},null,544),[[l,r.tg_notice_text]]),t[79]||(t[79]=e("div",{class:"mt-1 text-gray-500 dark:text-gray-400 text-xs"}," 默认模板：{username} {date} 上传了图片 {filename}，存储容器[{StorageType}] ",-1))]),e("div",N,[t[81]||(t[81]=e("label",{class:"setting-label block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",for:"storage_type"}," 存储类型 ",-1)),o(e("select",{id:"storage_type","onUpdate:modelValue":t[8]||(t[8]=s=>r.storage_type=s),class:"setting-input w-full px-4 py-2.5 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 focus:ring-2 focus:ring-primary focus:border-primary dark:focus:ring-primary/70 dark:focus:border-primary/70 transition-colors outline-none",onChange:t[9]||(t[9]=s=>_("storage_type",r.storage_type))},[...t[80]||(t[80]=[k('<option value="" disabled data-v-b8c37557>请选择存储类型</option><option value="default" data-v-b8c37557>本地存储</option><option value="s3" data-v-b8c37557>S3</option><option value="r2" data-v-b8c37557>R2</option><option value="webdav" data-v-b8c37557>WebDav</option><option value="ftp" data-v-b8c37557>FTP</option><option value="telegram" data-v-b8c37557>Telegram</option><option value="custom" data-v-b8c37557>NodeSeek / 自定义 API</option>',8)])],544),[[V,r.storage_type]]),e("div",K,[r.storage_type==="telegram"?(p(),u("span",z,"选择Telegram存储必须使用海外服务器，否则无法正常上传、查看、删除图片")):r.storage_type==="custom"?(p(),u("span",L,"支持 NodeSeek 图床 API 格式")):y("",!0)])]),r.storage_type==="custom"?(p(),u("div",M,[t[85]||(t[85]=e("h3",{class:"font-bold text-sm text-gray-800 dark:text-gray-200"}," 自定义 API 配置 ",-1)),e("div",O,[t[82]||(t[82]=e("label",{class:"setting-label block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",for:"custom_api_url"}," API 地址 (URL) ",-1)),o(e("input",{id:"custom_api_url","onUpdate:modelValue":t[10]||(t[10]=s=>r.custom_api_url=s),type:"text",class:"setting-input w-full px-4 py-2.5 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 focus:ring-2 focus:ring-primary focus:border-primary dark:focus:ring-primary/70 dark:focus:border-primary/70 transition-colors outline-none",placeholder:"如 https://api.nodeimage.com",onBlur:t[11]||(t[11]=s=>a("custom_api_url",r.custom_api_url))},null,544),[[l,r.custom_api_url]]),t[83]||(t[83]=e("div",{class:"mt-1 text-gray-500 dark:text-gray-400 text-xs"}," 填写完整的 API 域名或根路径，无需包含 /api/upload ",-1))]),e("div",H,[t[84]||(t[84]=e("label",{class:"setting-label block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",for:"custom_api_key"}," API Key ",-1)),o(e("input",{id:"custom_api_key","onUpdate:modelValue":t[12]||(t[12]=s=>r.custom_api_key=s),type:"text",autocomplete:"off",class:"setting-input w-full px-4 py-2.5 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 focus:ring-2 focus:ring-primary focus:border-primary dark:focus:ring-primary/70 dark:focus:border-primary/70 transition-colors outline-none",placeholder:"请输入 API Key",onBlur:t[13]||(t[13]=s=>a("custom_api_key",r.custom_api_key))},null,544),[[l,r.custom_api_key]])])])):y("",!0),["s3","r2"].includes(r.storage_type)?(p(),u("div",Y,[t[92]||(t[92]=e("h3",{class:"font-bold text-sm text-gray-800 dark:text-gray-200"}," S3/R2 配置 ",-1)),e("div",q,[t[86]||(t[86]=e("label",{class:"setting-label block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",for:"s3_endpoint"}," S3 Endpoint ",-1)),o(e("input",{id:"s3_endpoint","onUpdate:modelValue":t[14]||(t[14]=s=>r.s3_endpoint=s),type:"text",class:"setting-input w-full px-4 py-2.5 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 focus:ring-2 focus:ring-primary focus:border-primary dark:focus:ring-primary/70 dark:focus:border-primary/70 transition-colors outline-none",placeholder:"如：s3.us-west-004.backblazeb2.com",onBlur:t[15]||(t[15]=s=>a("s3_endpoint",r.s3_endpoint))},null,544),[[l,r.s3_endpoint]])]),e("div",J,[t[87]||(t[87]=e("label",{class:"setting-label block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",for:"s3_access_key"}," S3 AccessKey ",-1)),o(e("input",{id:"s3_access_key","onUpdate:modelValue":t[16]||(t[16]=s=>r.s3_access_key=s),type:"text",autocomplete:"off",class:"setting-input w-full px-4 py-2.5 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 focus:ring-2 focus:ring-primary focus:border-primary dark:focus:ring-primary/70 dark:focus:border-primary/70 transition-colors outline-none",placeholder:"S3访问密钥ID",onBlur:t[17]||(t[17]=s=>a("s3_access_key",r.s3_access_key))},null,544),[[l,r.s3_access_key]])]),e("div",Q,[t[88]||(t[88]=e("label",{class:"setting-label block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",for:"s3_secret_key"}," S3 SecretKey ",-1)),o(e("input",{id:"s3_secret_key","onUpdate:modelValue":t[18]||(t[18]=s=>r.s3_secret_key=s),type:"password",autocomplete:"new-password",class:"setting-input w-full px-4 py-2.5 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 focus:ring-2 focus:ring-primary focus:border-primary dark:focus:ring-primary/70 dark:focus:border-primary/70 transition-colors outline-none",placeholder:"S3私有访问密钥",onBlur:t[19]||(t[19]=s=>a("s3_secret_key",r.s3_secret_key))},null,544),[[l,r.s3_secret_key]])]),e("div",X,[t[89]||(t[89]=e("label",{class:"setting-label block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",for:"S3Bucket"}," S3 Bucket ",-1)),o(e("input",{id:"S3Bucket","onUpdate:modelValue":t[20]||(t[20]=s=>r.s3_bucket=s),type:"text",class:"setting-input w-full px-4 py-2.5 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 focus:ring-2 focus:ring-primary focus:border-primary dark:focus:ring-primary/70 dark:focus:border-primary/70 transition-colors outline-none",placeholder:"存储桶名称",onBlur:t[21]||(t[21]=s=>a("s3_bucket",r.s3_bucket))},null,544),[[l,r.s3_bucket]])]),e("div",Z,[t[90]||(t[90]=e("label",{class:"setting-label block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",for:"s3_custom_url"}," 自定义访问 URL（可选） ",-1)),o(e("input",{id:"s3_custom_url","onUpdate:modelValue":t[22]||(t[22]=s=>r.s3_custom_url=s),type:"text",class:"setting-input w-full px-4 py-2.5 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 focus:ring-2 focus:ring-primary focus:border-primary dark:focus:ring-primary/70 dark:focus:border-primary/70 transition-colors outline-none",placeholder:"如：https://cdn.example.com",onBlur:t[23]||(t[23]=s=>a("s3_custom_url",r.s3_custom_url))},null,544),[[l,r.s3_custom_url]]),t[91]||(t[91]=e("div",{class:"mt-1 text-gray-500 dark:text-gray-400 text-xs"}," 留空则使用图床默认 URL，填写则使用 S3/R2 原始链接 ",-1))])])):y("",!0),r.storage_type==="webdav"?(p(),u("div",h,[t[96]||(t[96]=e("h3",{class:"font-bold text-sm text-gray-800 dark:text-gray-200"}," WebDav 配置 ",-1)),e("div",tt,[t[93]||(t[93]=e("label",{class:"setting-label block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",for:"webdav_url"}," WebDav URL ",-1)),o(e("input",{id:"webdav_url","onUpdate:modelValue":t[24]||(t[24]=s=>r.webdav_url=s),type:"text",class:"setting-input w-full px-4 py-2.5 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 focus:ring-2 focus:ring-primary focus:border-primary dark:focus:ring-primary/70 dark:focus:border-primary/70 transition-colors outline-none",placeholder:"请填写 WebDav 地址",onBlur:t[25]||(t[25]=s=>a("webdav_url",r.webdav_url))},null,544),[[l,r.webdav_url]])]),e("div",et,[t[94]||(t[94]=e("label",{class:"setting-label block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",for:"webdav_user"}," WebDav 用户名 ",-1)),o(e("input",{id:"webdav_user","onUpdate:modelValue":t[26]||(t[26]=s=>r.webdav_user=s),type:"text",autocomplete:"off",class:"setting-input w-full px-4 py-2.5 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 focus:ring-2 focus:ring-primary focus:border-primary dark:focus:ring-primary/70 dark:focus:border-primary/70 transition-colors outline-none",placeholder:"请填写 WebDav 用户名",onBlur:t[27]||(t[27]=s=>a("webdav_user",r.webdav_user))},null,544),[[l,r.webdav_user]])]),e("div",rt,[t[95]||(t[95]=e("label",{class:"setting-label block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",for:"webdav_pass"}," WebDav 密码 ",-1)),o(e("input",{id:"webdav_pass","onUpdate:modelValue":t[28]||(t[28]=s=>r.webdav_pass=s),type:"password",autocomplete:"new-password",class:"setting-input w-full px-4 py-2.5 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 focus:ring-2 focus:ring-primary focus:border-primary dark:focus:ring-primary/70 dark:focus:border-primary/70 transition-colors outline-none",placeholder:"请填写 WebDav 密码",onBlur:t[29]||(t[29]=s=>a("webdav_pass",r.webdav_pass))},null,544),[[l,r.webdav_pass]])])])):y("",!0),r.storage_type==="ftp"?(p(),u("div",st,[t[101]||(t[101]=e("h3",{class:"font-bold text-sm text-gray-800 dark:text-gray-200"}," FTP 配置 ",-1)),e("div",ot,[t[97]||(t[97]=e("label",{class:"setting-label block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",for:"ftp_host"}," FTP HOST ",-1)),o(e("input",{id:"ftp_host","onUpdate:modelValue":t[30]||(t[30]=s=>r.ftp_host=s),type:"text",class:"setting-input w-full px-4 py-2.5 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 focus:ring-2 focus:ring-primary focus:border-primary dark:focus:ring-primary/70 dark:focus:border-primary/70 transition-colors outline-none",placeholder:"请填写 FTP IP或域名",onBlur:t[31]||(t[31]=s=>a("ftp_host",r.ftp_host))},null,544),[[l,r.ftp_host]])]),t[102]||(t[102]=e("div",{class:"mt-1 text-gray-500 dark:text-gray-400 text-xs"}," 直接填写IP或域名，无需填写 ftp:// 或者 sftp:// ",-1)),e("div",at,[t[98]||(t[98]=e("label",{class:"setting-label block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",for:"ftp_port"}," FTP 端口 ",-1)),o(e("input",{id:"ftp_port","onUpdate:modelValue":t[32]||(t[32]=s=>r.ftp_port=s),type:"number",class:"setting-input w-full px-4 py-2.5 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 focus:ring-2 focus:ring-primary focus:border-primary dark:focus:ring-primary/70 dark:focus:border-primary/70 transition-colors outline-none",placeholder:"FTP 默认端口号 21",onBlur:t[33]||(t[33]=s=>a("ftp_port",r.ftp_port))},null,544),[[l,r.ftp_port]])]),e("div",lt,[t[99]||(t[99]=e("label",{class:"setting-label block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",for:"ftp_user"}," FTP 用户名 ",-1)),o(e("input",{id:"ftp_user","onUpdate:modelValue":t[34]||(t[34]=s=>r.ftp_user=s),type:"text",autocomplete:"username",class:"setting-input w-full px-4 py-2.5 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 focus:ring-2 focus:ring-primary focus:border-primary dark:focus:ring-primary/70 dark:focus:border-primary/70 transition-colors outline-none",placeholder:"请填写 FTP 用户名",onBlur:t[35]||(t[35]=s=>a("ftp_user",r.ftp_user))},null,544),[[l,r.ftp_user]])]),e("div",nt,[t[100]||(t[100]=e("label",{class:"setting-label block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",for:"ftp_pass"}," FTP 密码 ",-1)),o(e("input",{id:"ftp_pass","onUpdate:modelValue":t[36]||(t[36]=s=>r.ftp_pass=s),type:"password",autocomplete:"new-password",class:"setting-input w-full px-4 py-2.5 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 focus:ring-2 focus:ring-primary focus:border-primary dark:focus:ring-primary/70 dark:focus:border-primary/70 transition-colors outline-none",placeholder:"请填写 FTP 登录密码",onBlur:t[37]||(t[37]=s=>a("ftp_pass",r.ftp_pass))},null,544),[[l,r.ftp_pass]])])])):y("",!0)])])]),e("div",it,[e("div",dt,[t[150]||(t[150]=e("h2",{class:"panel-title flex items-center text-xl font-semibold mb-8"},[e("span",{class:"panel-icon mr-2 text-2xl"},[e("i",{class:"ri-settings-2-line"})]),x(" 系统设置 ")],-1)),e("div",gt,[e("div",ut,[t[106]||(t[106]=e("label",{class:"setting-label text-sm font-medium text-gray-700 dark:text-gray-300"}," 保存原图 ",-1)),e("label",pt,[o(e("input",{type:"checkbox","onUpdate:modelValue":t[38]||(t[38]=s=>r.original_image=s),class:"sr-only peer",onChange:t[39]||(t[39]=s=>i("original_image",r.original_image))},null,544),[[d,r.original_image]]),t[104]||(t[104]=e("div",{class:"w-12 h-6 bg-gray-200 dark:bg-gray-700 rounded-full peer-checked:bg-green-500 dark:peer-checked:bg-green-600 switch-transition switch-antialias"},null,-1)),t[105]||(t[105]=e("div",{class:"absolute left-1 top-1 bg-white dark:bg-gray-200 w-4 h-4 rounded-full switch-transition switch-antialias peer-checked:translate-x-6"},null,-1))])]),e("div",bt,[t[109]||(t[109]=e("label",{class:"setting-label text-sm font-medium text-gray-700 dark:text-gray-300"}," 保存WEBP格式 ",-1)),e("label",yt,[o(e("input",{type:"checkbox","onUpdate:modelValue":t[40]||(t[40]=s=>r.save_webp=s),class:"sr-only peer",onChange:t[41]||(t[41]=s=>i("save_webp",r.save_webp))},null,544),[[d,r.save_webp]]),t[107]||(t[107]=e("div",{class:"w-12 h-6 bg-gray-200 dark:bg-gray-700 rounded-full peer-checked:bg-green-500 dark:peer-checked:bg-green-600 switch-transition switch-antialias"},null,-1)),t[108]||(t[108]=e("div",{class:"absolute left-1 top-1 bg-white dark:bg-gray-200 w-4 h-4 rounded-full switch-transition switch-antialias peer-checked:translate-x-6"},null,-1))])]),e("div",mt,[t[112]||(t[112]=e("label",{class:"setting-label text-sm font-medium text-gray-700 dark:text-gray-300"}," 生成缩略图 ",-1)),e("label",ft,[o(e("input",{type:"checkbox","onUpdate:modelValue":t[42]||(t[42]=s=>r.thumbnail=s),class:"sr-only peer",onChange:t[43]||(t[43]=s=>i("thumbnail",r.thumbnail))},null,544),[[d,r.thumbnail]]),t[110]||(t[110]=e("div",{class:"w-12 h-6 bg-gray-200 dark:bg-gray-700 rounded-full peer-checked:bg-green-500 dark:peer-checked:bg-green-600 switch-transition switch-antialias"},null,-1)),t[111]||(t[111]=e("div",{class:"absolute left-1 top-1 bg-white dark:bg-gray-200 w-4 h-4 rounded-full switch-transition switch-antialias peer-checked:translate-x-6"},null,-1))])]),t[144]||(t[144]=e("div",{class:"mt-1 text-gray-500 dark:text-gray-400 text-xs"}," 生成缩略图，可提升后台预览速度，上传速度稍慢 ",-1)),e("div",kt,[t[115]||(t[115]=e("label",{class:"setting-label text-sm font-medium text-gray-700 dark:text-gray-300"}," 允许游客登录 ",-1)),e("label",xt,[o(e("input",{type:"checkbox","onUpdate:modelValue":t[44]||(t[44]=s=>r.tourist=s),class:"sr-only peer",onChange:t[45]||(t[45]=s=>i("tourist",r.tourist))},null,544),[[d,r.tourist]]),t[113]||(t[113]=e("div",{class:"w-12 h-6 bg-gray-200 dark:bg-gray-700 rounded-full peer-checked:bg-green-500 dark:peer-checked:bg-green-600 switch-transition switch-antialias"},null,-1)),t[114]||(t[114]=e("div",{class:"absolute left-1 top-1 bg-white dark:bg-gray-200 w-4 h-4 rounded-full switch-transition switch-antialias peer-checked:translate-x-6"},null,-1))])]),t[145]||(t[145]=e("div",{class:"mt-1 text-gray-500 dark:text-gray-400 text-xs"}," 开启后访问登录页将自动以游客身份登录 ",-1)),e("div",wt,[t[118]||(t[118]=e("label",{class:"setting-label text-sm font-medium text-gray-700 dark:text-gray-300"}," 启用TG通知 ",-1)),e("label",vt,[o(e("input",{type:"checkbox","onUpdate:modelValue":t[46]||(t[46]=s=>r.tg_notice=s),class:"sr-only peer",onChange:t[47]||(t[47]=s=>i("tg_notice",r.tg_notice))},null,544),[[d,r.tg_notice]]),t[116]||(t[116]=e("div",{class:"w-12 h-6 bg-gray-200 dark:bg-gray-700 rounded-full peer-checked:bg-blue-500 dark:peer-checked:bg-blue-600 switch-transition switch-antialias"},null,-1)),t[117]||(t[117]=e("div",{class:"absolute left-1 top-1 bg-white dark:bg-gray-200 w-4 h-4 rounded-full switch-transition switch-antialias peer-checked:translate-x-6"},null,-1))])]),t[146]||(t[146]=e("div",{class:"mt-1 text-gray-500 dark:text-gray-400 text-xs"}," 国内服务器不要开启TG通知 ",-1)),e("div",ct,[t[121]||(t[121]=e("label",{class:"setting-label text-sm font-medium text-gray-700 dark:text-gray-300"}," 启用TG Webhook上传 ",-1)),e("label",_t,[o(e("input",{type:"checkbox","onUpdate:modelValue":t[48]||(t[48]=s=>r.tg_webhook=s),class:"sr-only peer",onChange:t[49]||(t[49]=s=>i("tg_webhook",r.tg_webhook))},null,544),[[d,r.tg_webhook]]),t[119]||(t[119]=e("div",{class:"w-12 h-6 bg-gray-200 dark:bg-gray-700 rounded-full peer-checked:bg-blue-500 dark:peer-checked:bg-blue-600 switch-transition switch-antialias"},null,-1)),t[120]||(t[120]=e("div",{class:"absolute left-1 top-1 bg-white dark:bg-gray-200 w-4 h-4 rounded-full switch-transition switch-antialias peer-checked:translate-x-6"},null,-1))])]),t[147]||(t[147]=e("div",{class:"mt-1 text-gray-500 dark:text-gray-400 text-xs"}," 开启后可向 Bot 发送图片 URL 来上传图片（需填写域名和 Bot Token） ",-1)),e("div",Tt,[t[124]||(t[124]=e("label",{class:"setting-label text-sm font-medium text-gray-700 dark:text-gray-300"}," Turnstile验证 ",-1)),e("label",Ut,[o(e("input",{type:"checkbox","onUpdate:modelValue":t[50]||(t[50]=s=>r.turnstile=s),class:"sr-only peer",onChange:t[51]||(t[51]=s=>i("turnstile",r.turnstile))},null,544),[[d,r.turnstile]]),t[122]||(t[122]=e("div",{class:"w-12 h-6 bg-gray-200 dark:bg-gray-700 rounded-full peer-checked:bg-orange-500 dark:peer-checked:bg-orange-600 switch-transition switch-antialias"},null,-1)),t[123]||(t[123]=e("div",{class:"absolute left-1 top-1 bg-white dark:bg-gray-200 w-4 h-4 rounded-full switch-transition switch-antialias peer-checked:translate-x-6"},null,-1))])]),t[148]||(t[148]=e("div",{class:"mt-1 text-gray-500 dark:text-gray-400 text-xs"}," 启用 Cloudflare Turnstile 人机验证，防止恶意登录 ",-1)),o(e("div",Vt,[e("div",Bt,[t[125]||(t[125]=e("label",{class:"block text-xs font-medium text-gray-500 dark:text-gray-400 mb-1"},"站点密钥 (Site Key)",-1)),o(e("input",{"onUpdate:modelValue":t[52]||(t[52]=s=>r.turnstile_site_key=s),type:"text",autocomplete:"off",class:"w-full px-3 py-2 text-sm border border-gray-200 dark:border-gray-600 rounded bg-gray-50 dark:bg-gray-700/50 focus:outline-none focus:border-primary",placeholder:"0x4AAAA...",onBlur:t[53]||(t[53]=s=>a("turnstile_site_key",r.turnstile_site_key))},null,544),[[l,r.turnstile_site_key]]),t[126]||(t[126]=e("div",{class:"mt-1 text-gray-400 text-[10px]"}," 从 Cloudflare Dashboard 获取，用于前端渲染验证组件 ",-1))]),e("div",$t,[t[127]||(t[127]=e("label",{class:"block text-xs font-medium text-gray-500 dark:text-gray-400 mb-1"},"私密密钥 (Secret Key)",-1)),o(e("input",{"onUpdate:modelValue":t[54]||(t[54]=s=>r.turnstile_secret_key=s),type:"password",autocomplete:"new-password",class:"w-full px-3 py-2 text-sm border border-gray-200 dark:border-gray-600 rounded bg-gray-50 dark:bg-gray-700/50 focus:outline-none focus:border-primary",placeholder:"0x4AAAA...",onBlur:t[55]||(t[55]=s=>a("turnstile_secret_key",r.turnstile_secret_key))},null,544),[[l,r.turnstile_secret_key]]),t[128]||(t[128]=e("div",{class:"mt-1 text-gray-400 text-[10px]"}," 从 Cloudflare Dashboard 获取，用于后端验证 token ",-1))]),t[129]||(t[129]=e("div",{class:"text-[10px] text-amber-600 dark:text-amber-400"},[e("i",{class:"ri-information-line mr-1"}),x(" 也可通过环境变量 TURNSTILE_SITE_KEY 和 TURNSTILE_SECRET_KEY 配置 ")],-1))],512),[[w,r.turnstile]]),e("div",St,[t[132]||(t[132]=e("label",{class:"setting-label text-sm font-medium text-gray-700 dark:text-gray-300"}," 开启图片水印 ",-1)),e("label",Pt,[o(e("input",{type:"checkbox","onUpdate:modelValue":t[56]||(t[56]=s=>r.watermark_enable=s),class:"sr-only peer",onChange:t[57]||(t[57]=s=>i("watermark_enable",r.watermark_enable))},null,544),[[d,r.watermark_enable]]),t[130]||(t[130]=e("div",{class:"w-12 h-6 bg-gray-200 dark:bg-gray-700 rounded-full peer-checked:bg-green-500 dark:peer-checked:bg-green-600 switch-transition switch-antialias"},null,-1)),t[131]||(t[131]=e("div",{class:"absolute left-1 top-1 bg-white dark:bg-gray-200 w-4 h-4 rounded-full switch-transition switch-antialias peer-checked:translate-x-6"},null,-1))])]),o(e("div",Ct,[e("div",At,[e("div",It,[t[133]||(t[133]=e("label",{class:"block text-xs font-medium text-gray-500 dark:text-gray-400 mb-1"},"水印文本",-1)),o(e("input",{"onUpdate:modelValue":t[58]||(t[58]=s=>r.watermark_text=s),type:"text",class:"w-full px-3 py-2 text-sm border border-gray-200 dark:border-gray-600 rounded bg-gray-50 dark:bg-gray-700/50 focus:outline-none focus:border-primary",placeholder:"水印文本",onBlur:t[59]||(t[59]=s=>a("watermark_text",r.watermark_text))},null,544),[[l,r.watermark_text]])]),e("div",jt,[t[134]||(t[134]=e("label",{class:"block text-xs font-medium text-gray-500 dark:text-gray-400 mb-1"},"字体大小",-1)),o(e("input",{"onUpdate:modelValue":t[60]||(t[60]=s=>r.watermark_size=s),type:"text",class:"w-full px-3 py-2 text-sm border border-gray-200 dark:border-gray-600 rounded bg-gray-50 dark:bg-gray-700/50 focus:outline-none focus:border-primary",placeholder:"如 20",onBlur:t[61]||(t[61]=s=>a("watermark_size",r.watermark_size))},null,544),[[l,r.watermark_size]])]),e("div",Dt,[t[135]||(t[135]=e("label",{class:"block text-xs font-medium text-gray-500 dark:text-gray-400 mb-1"},"字体颜色",-1)),o(e("input",{"onUpdate:modelValue":t[62]||(t[62]=s=>r.watermark_color=s),type:"text",class:"w-full px-3 py-2 text-sm border border-gray-200 dark:border-gray-600 rounded bg-gray-50 dark:bg-gray-700/50 focus:outline-none focus:border-primary",placeholder:"#000000",onBlur:t[63]||(t[63]=s=>a("watermark_color",r.watermark_color))},null,544),[[l,r.watermark_color]])]),e("div",Et,[t[136]||(t[136]=e("label",{class:"block text-xs font-medium text-gray-500 dark:text-gray-400 mb-1"},"透明度 (0-1)",-1)),o(e("input",{"onUpdate:modelValue":t[64]||(t[64]=s=>r.watermark_opac=s),type:"text",class:"w-full px-3 py-2 text-sm border border-gray-200 dark:border-gray-600 rounded bg-gray-50 dark:bg-gray-700/50 focus:outline-none focus:border-primary",placeholder:"0.5",onBlur:t[65]||(t[65]=s=>a("watermark_opac",r.watermark_opac))},null,544),[[l,r.watermark_opac]])]),e("div",Rt,[t[138]||(t[138]=e("label",{class:"block text-xs font-medium text-gray-500 dark:text-gray-400 mb-1"},"位置",-1)),o(e("select",{"onUpdate:modelValue":t[66]||(t[66]=s=>r.watermark_pos=s),class:"w-full px-3 py-2 text-sm border border-gray-200 dark:border-gray-600 rounded bg-gray-50 dark:bg-gray-700/50 focus:outline-none focus:border-primary",onChange:t[67]||(t[67]=s=>_("watermark_pos",r.watermark_pos))},[...t[137]||(t[137]=[k('<option value="top-left" data-v-b8c37557>左上角</option><option value="top-right" data-v-b8c37557>右上角</option><option value="bottom-left" data-v-b8c37557>左下角</option><option value="bottom-right" data-v-b8c37557>右下角</option><option value="center" data-v-b8c37557>居中</option>',5)])],544),[[V,r.watermark_pos]])])])],512),[[w,r.watermark_enable]]),t[149]||(t[149]=e("div",{class:"mt-1 text-gray-500 dark:text-gray-400 text-xs"}," 新上传的图片自动添加水印，已上传的图片不会添加水印。 ",-1)),e("div",Ft,[t[141]||(t[141]=e("label",{class:"setting-label text-sm font-medium text-gray-700 dark:text-gray-300"}," 开启来源白名单 ",-1)),e("label",Wt,[o(e("input",{type:"checkbox","onUpdate:modelValue":t[68]||(t[68]=s=>r.referer_white_enable=s),class:"sr-only peer",onChange:t[69]||(t[69]=s=>i("referer_white_enable",r.referer_white_enable))},null,544),[[d,r.referer_white_enable]]),t[139]||(t[139]=e("div",{class:"w-12 h-6 bg-gray-200 dark:bg-gray-700 rounded-full peer-checked:bg-green-500 dark:peer-checked:bg-green-600 switch-transition switch-antialias"},null,-1)),t[140]||(t[140]=e("div",{class:"absolute left-1 top-1 bg-white dark:bg-gray-200 w-4 h-4 rounded-full switch-transition switch-antialias peer-checked:translate-x-6"},null,-1))])]),o(e("div",Gt,[t[142]||(t[142]=e("label",{class:"block text-xs font-medium text-gray-500 dark:text-gray-400"},"允许的域名列表",-1)),o(e("textarea",{"onUpdate:modelValue":t[70]||(t[70]=s=>r.referer_white_list=s),class:"w-full px-3 py-2 text-sm border border-gray-200 dark:border-gray-600 rounded bg-gray-50 dark:bg-gray-700/50 focus:outline-none focus:border-primary",placeholder:"example.com, test.com",rows:"3",onBlur:t[71]||(t[71]=s=>a("referer_white_list",r.referer_white_list))},null,544),[[l,r.referer_white_list]]),t[143]||(t[143]=e("div",{class:"text-[10px] text-gray-400"}," 仅需填写域名，多个用逗号分隔。无需http/端口。 ",-1))],512),[[w,r.referer_white_enable]])])])])])])]))}},Lt=$(Nt,[["__scopeId","data-v-b8c37557"]]);export{Lt as default};
