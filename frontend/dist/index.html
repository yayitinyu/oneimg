<!DOCTYPE html>
<html lang="zh-CN" class="fonts-loading">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, viewport-fit=cover"
    />
    <title></title>
    <link rel="icon" href="./favicon.svg?v=2" type="image/svg+xml" />

    <!-- 字体加载期间的过渡样式 -->
    <style>
      /* 字体加载中时隐藏不必要的重排 */
      .fonts-loading * {
        transition: none !important;
      }
      .fonts-loading body {
        visibility: hidden;
      }
      html:not(.fonts-loading) body {
        visibility: visible;
      }
    </style>

    <!-- 主题初始化脚本 - 防止白色闪烁，放在首个阻塞资源前 -->
    <script>
      (function () {
        const storageKey = "theme-preference";
        const getTheme = () => {
          if (localStorage.getItem(storageKey)) {
            return localStorage.getItem(storageKey);
          }
          return window.matchMedia("(prefers-color-scheme: dark)").matches
            ? "dark"
            : "light";
        };
        // 立即应用主题（在页面渲染前添加 dark 类）
        if (getTheme() === "dark") {
          document.documentElement.classList.add("dark");
        }

        // 字体加载检测 - 简单移除 loading 类，实际由 Vite 打包的 CSS 负责加载
        if ("fonts" in document) {
          document.fonts.ready.then(function () {
            document.documentElement.classList.remove("fonts-loading");
          });
        } else {
          // 降级：延迟移除加载类
          setTimeout(function () {
            document.documentElement.classList.remove("fonts-loading");
          }, 300);
        }
      })();
    </script>
    <style>
      body {
        font-family: "寒蝉全圆体", "Chill Round", system-ui, -apple-system,
          BlinkMacSystemFont, sans-serif;
        font-weight: 400;
      }
    </style>
    <script type="module" crossorigin src="./assets/index-D1ITwctP.js"></script>
    <link rel="stylesheet" crossorigin href="./assets/index-MjXgKMLf.css">
  </head>
  <body
    class="font-wenkai bg-light-100 text-text-primary transition-all duration-300 dark:bg-dark-300 dark:text-light-100 min-h-screen flex flex-col"
  >
    <div id="app"></div>
  </body>
</html>
